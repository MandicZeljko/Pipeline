pipeline {
    agent any
    options{
        ansiColor('xterm')
        
    }
    stages {
        stage('google') {
            parallel {
                
                stage('Firefox') {
                    steps{
                         bat 'npx cypress run --browser firefox -- --config videoRecording=false --spec cypress/e2e/google.cy.js'
                    }
                     
                }
                stage('chrome') {
                    steps{
                        bat 'npx cypress run --browser chrome  --config videoRecording=false -- spec cypress/e2e/google.cy.js'
                    }
                      
                }
            }

        }
        stage('yahoo'){
            parallel {
                
                stage('Firefox') {
                    steps{
                         bat 'npx cypress run --browser firefox  --config videoRecording=false --spec cypress/e2e/yahoo.cy.js'
                    }
                     
                }
                stage('chrome') {
                    steps{
                        bat 'npx cypress run --browser chrome --config videoRecording=false -- spec cypress/e2e/yahoo.cy.js'
                    }
                      
                }
            }
        }
    }

    post {
        always{
           // publishHTML ([allowMissing: false,
        //alwaysLinkToLastBuild:false,
       // keepAll: true,
        //reportDir: 'reports',
        //reportFiles: 'myreport.html',
        //reportName: 'My_Reports',
       // reportTitles: 'The Report'])
        publishHTML([allowMissing: false,
         alwaysLinkToLastBuild: false, 
         keepAll: true, 
         reportDir: "HTML Report Directory", 
         reportFiles: 'html-file_name', 
         reportName: 'HTML Report', 
         reportTitles: ''])
        }
    }
    
}