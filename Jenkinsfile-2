pipeline {
    agent any
    options{
        ansiColor('xterm')
    }
    stages {
        stage('Multiple browsers') {
            parallel {
                stage('Edge') {
                    steps{
                        bat 'npx cypress run --browser edge -- spec cypress/e2e/google.js'
                    }
                     
                }
                stage('Firefox') {
                    steps{
                         bat 'npx cypress run --browser firefox -- spec cypress/e2e/google.js'
                    }
                     
                }
                stage('chrome') {
                    steps{
                        bat 'npx cypress run --browser chrome -- spec cypress/e2e/google.js'
                    }
                      
                }
            }
        }
    }
    post{
         always: [
            allowMissing: false,
            alwaysLinkToLastBuild: false,
            keepAll: true,
            reportDir: 'coverage',
            reportFiles: 'index.html',
            reportName: 'RCov Report'
          ]
    }
}