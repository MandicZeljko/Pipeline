pipeline {
    agent any
    options{
        ansiColor('xterm')
    }
    stages {
        stage('Multiple browsers') {
            parallel {
                
                stage('Firefox') {
                    steps{
                         bat 'npx cypress run --browser firefox -- spec cypress/e2e/google.cy.js'
                    }
                     
                }
                stage('chrome') {
                    steps{
                        bat 'npx cypress run --browser chrome -- spec cypress/e2e/google.cy.js'
                    }
                      
                }
            }
            parallel {
                
                stage('Firefox') {
                    steps{
                         bat 'npx cypress run --browser firefox -- spec cypress/e2e/yahoo.cy.js'
                    }
                     
                }
                stage('chrome') {
                    steps{
                        bat 'npx cypress run --browser chrome -- spec cypress/e2e/yahoo.cy.js'
                    }
                      
                }
            }
        }
    }

    post {
        always{
            publishHTML ([allowMissing: false,
        alwaysLinkToLastBuild:false,
        keepAll: true,
        reportDir: 'reports',
        reportFiles: 'myreport.html',
        reportName: 'My Reports',
        reportTitles: 'The Report'])
        }
    }
    
}